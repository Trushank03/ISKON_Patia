(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{2425:(e,t,a)=>{"use strict";a.d(t,{AnimateOnView:()=>n});var s=a(5155),i=a(2115),r=a(2596),l=a(9688);function n(e){let{children:t,className:a,animation:n="fade-up",delay:c=0,threshold:o=.1,once:d=!0}=e,[m,x]=(0,i.useState)(!1),h=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=new IntersectionObserver(t=>{let[a]=t;a.isIntersecting?(x(!0),d&&h.current&&e.unobserve(h.current)):d||x(!1)},{threshold:o,rootMargin:"0px 0px -50px 0px"}),t=h.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[d,o]),(0,s.jsx)("div",{ref:h,className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,r.$)(t))}("transition-all duration-700 ease-out",{"fade-up":"opacity-0 translate-y-8","fade-in":"opacity-0","slide-in-right":"opacity-0 translate-x-8","slide-in-left":"opacity-0 -translate-x-8","zoom-in":"opacity-0 scale-95",bounce:"opacity-0 translate-y-4"}[n],m&&"opacity-100 translate-y-0 translate-x-0 scale-100",a),style:{transitionDelay:"".concat(c,"ms")},children:t})}},3647:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),i=a(2115),r=a(6766),l=a(6874),n=a.n(l),c=a(5695),o=a(7550),d=a(9946);let m=(0,d.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=a(5339);let h=(0,d.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),u=(0,d.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p=(0,d.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),y=(0,d.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var g=a(2425);function f(){(0,c.useRouter)();let[e,t]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[d,f]=(0,i.useState)(""),[v,b]=(0,i.useState)(null),[N,j]=(0,i.useState)(null),[w,k]=(0,i.useState)(!1),[T,S]=(0,i.useState)(!1),[D,E]=(0,i.useState)(!1),[A,C]=(0,i.useState)(null),[P,I]=(0,i.useState)([]),[M,F]=(0,i.useState)(!0),[z,O]=(0,i.useState)(null);(0,i.useEffect)(()=>{H()},[]);let H=async()=>{F(!0),O(null);try{await new Promise(e=>setTimeout(e,1e3)),I([{id:1,noticeTitle:"Kartika Deepotsava 2024",noticeText:"Join us for the auspicious month-long celebration of Kartika, the most sacred month dedicated to Lord Damodara.",creationTime:"2024-05-01T10:00:00Z",globalNoticeID:"NTC001",noticefile:null},{id:2,noticeTitle:"Deep Daan in Kartika Month",noticeText:"Special lamp offering ceremony during the auspicious month of Kartika.",creationTime:"2024-05-02T14:30:00Z",globalNoticeID:"NTC002",noticefile:null},{id:3,noticeTitle:"Bhagavad Gita Study Circle",noticeText:"Weekly study of the Bhagavad Gita with in-depth discussions on its practical applications in modern life.",creationTime:"2024-05-03T09:15:00Z",globalNoticeID:"NTC003",noticefile:null}])}catch(e){console.error("Error fetching notices:",e),O("Failed to load events. Please try again later.")}finally{F(!1)}},L=async()=>{k(!0),O(null);try{let t=new FormData;t.append("noticeTitle",e),t.append("noticeText",a),t.append("globalNoticeID",d||"NTC".concat(Math.floor(1e3*Math.random()).toString().padStart(3,"0"))),t.append("creationTime",new Date().toISOString()),v&&t.append("noticefile",v),await fetch("http://127.0.0.1:8000/api/notice/notices/",{method:"POST",body:t}),await new Promise(e=>setTimeout(e,1500));let s={id:P.length+1,noticeTitle:e,noticeText:a,creationTime:new Date().toISOString(),globalNoticeID:d||"NTC".concat(Math.floor(1e3*Math.random()).toString().padStart(3,"0")),noticefile:N};I([...P,s]),K(),alert("Event created successfully!")}catch(e){console.error("Error creating notice:",e),O("Failed to create event. Please try again.")}finally{k(!1)}},V=async()=>{if(A){k(!0),O(null);try{await new Promise(e=>setTimeout(e,1500));let t=P.map(t=>t.id===A?{...t,noticeTitle:e,noticeText:a,globalNoticeID:d}:t);I(t),K(),E(!1),C(null),alert("Event updated successfully!")}catch(e){console.error("Error updating notice:",e),O("Failed to update event. Please try again.")}finally{k(!1)}}},U=async e=>{if(confirm("Are you sure you want to delete this event?"))try{await new Promise(e=>setTimeout(e,1e3)),I(P.filter(t=>t.id!==e)),alert("Event deleted successfully!")}catch(e){console.error("Error deleting notice:",e),alert("Failed to delete event. Please try again.")}},_=async e=>{e.preventDefault(),D?await V():await L()},q=e=>{t(e.noticeTitle),l(e.noticeText),f(e.globalNoticeID),j(e.noticefile),E(!0),C(e.id),window.scrollTo({top:0,behavior:"smooth"})},K=()=>{t(""),l(""),f(""),b(null),j(null),E(!1),C(null)},G=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("main",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-primary text-white",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(r.default,{src:"/images/iskcon-logo.png",alt:"ISKCON Logo",width:80,height:60,className:"h-12 w-auto"}),(0,s.jsx)("span",{className:"ml-3 text-xl font-medium",children:"Admin Portal"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"text-sm",children:"Welcome, Admin"}),(0,s.jsx)(n(),{href:"/loginadmin",className:"bg-white/20 hover:bg-white/30 px-3 py-1 rounded-md text-sm transition-colors duration-300",children:"Logout"})]})]})})}),(0,s.jsx)("div",{className:"bg-white border-b",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center h-12",children:[(0,s.jsx)(n(),{href:"/admin/dashboard",className:"text-gray-600 hover:text-primary px-3 py-2 text-sm font-medium",children:"Dashboard"}),(0,s.jsx)(n(),{href:"/admin/event-creation",className:"text-primary border-b-2 border-primary px-3 py-2 text-sm font-medium",children:"Events"}),(0,s.jsx)(n(),{href:"/admin/donations",className:"text-gray-600 hover:text-primary px-3 py-2 text-sm font-medium",children:"Donations"}),(0,s.jsx)(n(),{href:"/admin/users",className:"text-gray-600 hover:text-primary px-3 py-2 text-sm font-medium",children:"Users"}),(0,s.jsx)(n(),{href:"/admin/settings",className:"text-gray-600 hover:text-primary px-3 py-2 text-sm font-medium",children:"Settings"})]})})}),(0,s.jsx)("div",{className:"flex-1 container mx-auto px-4 py-6",children:(0,s.jsxs)(g.AnimateOnView,{animation:"fade-up",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:D?"Edit Event":"Create New Event"}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[D&&(0,s.jsxs)("button",{onClick:K,className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors duration-300",children:[(0,s.jsx)(o.A,{size:16,className:"mr-2"}),"Cancel Edit"]}),(0,s.jsxs)("button",{onClick:()=>S(!T),className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors duration-300",children:[(0,s.jsx)(m,{size:16,className:"mr-2"}),T?"Hide Preview":"Preview"]})]})]}),z&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6 flex items-center",children:[(0,s.jsx)(x.A,{size:16,className:"mr-2"}),z]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-8",children:(0,s.jsxs)("form",{onSubmit:_,className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"noticeTitle",className:"block text-gray-700 text-sm font-medium mb-2",children:"Event Title"}),(0,s.jsx)("input",{type:"text",id:"noticeTitle",value:e,onChange:e=>t(e.target.value),placeholder:"Enter event title",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"globalNoticeID",className:"block text-gray-700 text-sm font-medium mb-2",children:"Event ID (Optional)"}),(0,s.jsx)("input",{type:"text",id:"globalNoticeID",value:d,onChange:e=>f(e.target.value),placeholder:"e.g., NTC001 (will be generated if left empty)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"A unique identifier for this event. Leave blank to auto-generate."})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"noticefile",className:"block text-gray-700 text-sm font-medium mb-2",children:"Event Image/File (Optional)"}),N?(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsx)(r.default,{src:N||"/placeholder.svg",alt:"File preview",width:600,height:300,className:"w-full h-64 object-cover rounded-md"}),(0,s.jsx)("button",{type:"button",onClick:()=>{b(null),j(null)},className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100",children:(0,s.jsx)(h,{size:16,className:"text-gray-700"})})]}):(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer bg-gray-50 border border-gray-300 rounded-md py-2 px-3 flex items-center justify-center hover:bg-gray-100",children:[(0,s.jsx)(u,{size:16,className:"mr-2"}),(0,s.jsx)("span",{children:"Choose file"})]}),(0,s.jsx)("input",{id:"file-upload",type:"file",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){b(a);let e=new FileReader;e.onloadend=()=>{j(e.result)},e.readAsDataURL(a)}},className:"hidden",accept:"image/*,.pdf,.doc,.docx"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Upload an image for the event or a document with details. Supported formats: JPG, PNG, PDF, DOC."})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"noticeText",className:"block text-gray-700 text-sm font-medium mb-2",children:"Event Description"}),(0,s.jsx)("textarea",{id:"noticeText",value:a,onChange:e=>l(e.target.value),rows:8,placeholder:"Write a detailed description of the event...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",required:!0})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("button",{type:"submit",disabled:w,className:"bg-primary hover:bg-primary/90 text-white px-6 py-2 rounded-md text-sm font-medium transition-colors duration-300 flex items-center",children:[w&&(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),(0,s.jsx)(p,{size:16,className:"mr-2"}),w?D?"Updating...":"Saving...":D?"Update Event":"Save Event"]})})]})}),T&&(0,s.jsx)(g.AnimateOnView,{animation:"fade-in",delay:200,children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-8",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Event Preview"}),(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative",children:[N?(0,s.jsx)(r.default,{src:N||"/placeholder.svg",alt:"Event preview",width:800,height:400,className:"w-full h-64 object-cover"}):(0,s.jsx)("div",{className:"w-full h-64 bg-gray-200 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-400",children:"No image uploaded"})}),(0,s.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-6",children:[(0,s.jsx)("h1",{className:"text-white text-2xl font-bold",children:e||"Event Title Will Appear Here"}),(0,s.jsxs)("div",{className:"text-white/80 text-sm mt-2",children:["ID: ",d||"Auto-generated"]})]})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"prose max-w-none",children:(0,s.jsx)("p",{className:"text-gray-800 whitespace-pre-line",children:a||"Your event description will appear here..."})})})]})]})})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Existing Events"}),M?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):0===P.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No events found. Create your first event above."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.noticeTitle}),(0,s.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.noticeText})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.globalNoticeID})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:G(e.creationTime)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>q(e),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[(0,s.jsx)(y,{size:16,className:"mr-1"}),"Edit"]}),(0,s.jsxs)("button",{onClick:()=>U(e.id),className:"text-red-600 hover:text-red-900 flex items-center",children:[(0,s.jsx)(h,{size:16,className:"mr-1"}),"Delete"]})]})})]},e.id))})]})})]})})]})}),(0,s.jsx)("div",{className:"bg-gray-100 py-4 border-t",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsx)("p",{className:"text-xs text-gray-600 text-center",children:"\xa9 2025 Sanatana Dharma Centre Admin Portal. All rights reserved."})})})]})}},5339:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7550:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8885:(e,t,a)=>{Promise.resolve().then(a.bind(a,3647))}},e=>{var t=t=>e(e.s=t);e.O(0,[104,95,441,684,358],()=>t(8885)),_N_E=e.O()}]);