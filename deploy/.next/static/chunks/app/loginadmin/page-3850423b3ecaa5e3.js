(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{1157:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(5155),s=r(2115),n=r(6766),l=r(5695),i=r(2425);let c="sanatana_access_token",o="sanatana_refresh_token",d=()=>localStorage.getItem(c),m=e=>{localStorage.setItem(c,e.access),localStorage.setItem(o,e.refresh)},u=()=>{localStorage.removeItem(c),localStorage.removeItem(o)},x=()=>!!d(),h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2?arguments[2]:void 0,a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{let n="".concat("http://127.0.0.1:8000/api").concat(e),l={};if(s||(l["Content-Type"]="application/json"),a){let e=d();if(!e)return{data:null,error:"Authentication required"};l.Authorization="JWT ".concat(e)}let i={method:t,headers:l,body:s?r:r?JSON.stringify(r):void 0},c=await fetch(n,i);if(401===c.status)return u(),{data:null,error:"Session expired. Please login again."};if(!c.ok){let e=await c.json().catch(()=>({}));return{data:null,error:e.detail||"Error: ".concat(c.status," ").concat(c.statusText)}}if(204===c.status)return{data:null,error:null};return{data:await c.json(),error:null}}catch(e){return console.error("API request failed:",e),{data:null,error:e instanceof Error?e.message:"Unknown error occurred"}}},p=async e=>{let t=await h("/token/","POST",e,!1);return t.data&&null===t.error&&m(t.data),t};function f(){let[e,t]=(0,s.useState)(""),[r,c]=(0,s.useState)(""),[o,d]=(0,s.useState)(!1),[m,u]=(0,s.useState)(""),h=(0,l.useRouter)();(0,s.useEffect)(()=>{x()&&h.push("/admin/event-creation")},[h]);let f=async t=>{t.preventDefault(),d(!0),u("");try{let{data:t,error:a}=await p({username:e,password:r});if(a||!t){u(a||"Login failed. Please check your credentials.");return}h.push("/admin/event-creation")}catch(e){u("An unexpected error occurred. Please try again."),console.error("Login error:",e)}finally{d(!1)}};return(0,a.jsxs)("main",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)("div",{className:"relative w-full h-16 bg-primary",children:(0,a.jsx)("div",{className:"container mx-auto px-4 h-full flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.default,{src:"/images/iskcon-logo.png",alt:"ISKCON Logo",width:80,height:60,className:"h-12 w-auto"}),(0,a.jsx)("span",{className:"ml-3 text-white text-xl font-medium",children:"Admin Portal"})]})})}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center bg-amber-50/30",children:(0,a.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,a.jsx)("div",{className:"absolute inset-0 w-full h-full",children:(0,a.jsx)(n.default,{src:"/images/cream-watercolor-texture.jpg",alt:"Background texture",fill:!0,className:"object-cover opacity-30"})}),(0,a.jsxs)("div",{className:"relative z-10 bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)(i.AnimateOnView,{animation:"fade-up",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-primary",children:"Admin Login"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to manage temple events and content"})]}),m&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-sm",children:m}),(0,a.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-medium mb-1",children:"Username"}),(0,a.jsx)("input",{id:"username",type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Enter your username",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-1",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",value:r,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Enter your password",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)("a",{href:"#",className:"text-primary hover:text-primary/80",children:"Forgot password?"})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("button",{type:"submit",disabled:o,className:"w-full bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-md transition-colors duration-300 flex justify-center items-center",children:[o?(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,o?"Signing in...":"Sign in"]})})]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"For admin access, please contact the temple management office."})})]}),(0,a.jsx)("div",{className:"bg-amber-50 py-4 px-8 text-center",children:(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"\xa9 2025 Sanatana Dharma Centre. All rights reserved."})})]})]})})]})}},2425:(e,t,r)=>{"use strict";r.d(t,{AnimateOnView:()=>i});var a=r(5155),s=r(2115),n=r(2596),l=r(9688);function i(e){let{children:t,className:r,animation:i="fade-up",delay:c=0,threshold:o=.1,once:d=!0}=e,[m,u]=(0,s.useState)(!1),x=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=new IntersectionObserver(t=>{let[r]=t;r.isIntersecting?(u(!0),d&&x.current&&e.unobserve(x.current)):d||u(!1)},{threshold:o,rootMargin:"0px 0px -50px 0px"}),t=x.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[d,o]),(0,a.jsx)("div",{ref:x,className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,n.$)(t))}("transition-all duration-700 ease-out",{"fade-up":"opacity-0 translate-y-8","fade-in":"opacity-0","slide-in-right":"opacity-0 translate-x-8","slide-in-left":"opacity-0 -translate-x-8","zoom-in":"opacity-0 scale-95",bounce:"opacity-0 translate-y-4"}[i],m&&"opacity-100 translate-y-0 translate-x-0 scale-100",r),style:{transitionDelay:"".concat(c,"ms")},children:t})}},3417:(e,t,r)=>{Promise.resolve().then(r.bind(r,1157))}},e=>{var t=t=>e(e.s=t);e.O(0,[104,441,684,358],()=>t(3417)),_N_E=e.O()}]);